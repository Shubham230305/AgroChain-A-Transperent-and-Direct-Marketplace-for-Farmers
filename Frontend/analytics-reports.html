<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgroChain - Analytics & Reports</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="analytics-reports.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="project-index.html" class="back-btn" title="Back to Project Index" style="margin-right: 15px;">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <i class="fas fa-seedling"></i>
                <span>AgroChain</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="crop-listing.html"><i class="fas fa-list"></i> Crop Listing</a></li>
                <li><a href="blockchain-payments.html"><i class="fas fa-coins"></i> Payments</a></li>
                <li><a href="iot-traceability.html"><i class="fas fa-map-marker-alt"></i> Traceability</a></li>
                <li><a href="cooperative-marketplace.html"><i class="fas fa-handshake"></i> Cooperative</a></li>
                <li><a href="market-forecast.html"><i class="fas fa-chart-line"></i> Forecast</a></li>
                <li><a href="analytics-reports.html" class="active"><i class="fas fa-chart-bar"></i> Analytics</a></li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Header Section -->
        <section class="analytics-header">
            <div class="container">
                <div class="header-content">
                    <div class="header-left">
                        <h1><i class="fas fa-chart-bar"></i> Analytics & Reports</h1>
                        <p>Comprehensive insights into agricultural market trends and performance</p>
                    </div>
                    <div class="header-right">
                        <div class="filter-controls">
                            <select id="timeFilter" class="filter-select">
                                <option value="week">This Week</option>
                                <option value="month" selected>This Month</option>
                                <option value="year">This Year</option>
                                <option value="custom">Custom Range</option>
                            </select>
                            <button id="exportPdf" class="export-btn">
                                <i class="fas fa-file-pdf"></i>
                                Export PDF
                            </button>
                            <button id="refreshData" class="refresh-btn">
                                <i class="fas fa-sync-alt"></i>
                                Refresh
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Metrics Cards -->
        <section class="metrics-section">
            <div class="container">
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-coins"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Total Revenue</h3>
                            <div class="metric-value">â‚¹2,847,500</div>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                +12.5%
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Total Sales</h3>
                            <div class="metric-value">1,247</div>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                +8.3%
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Active Buyers</h3>
                            <div class="metric-value">486</div>
                            <div class="metric-change positive">
                                <i class="fas fa-arrow-up"></i>
                                +15.2%
                            </div>
                        </div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <div class="metric-content">
                            <h3>Crop Varieties</h3>
                            <div class="metric-value">23</div>
                            <div class="metric-change neutral">
                                <i class="fas fa-minus"></i>
                                0%
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Charts Section -->
        <section class="charts-section">
            <div class="container">
                <div class="charts-grid">
                    <!-- Farmer Earnings Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-money-bill-wave"></i> Farmer Earnings Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-chart="earnings" data-period="daily">Daily</button>
                                <button class="chart-btn" data-chart="earnings" data-period="weekly">Weekly</button>
                                <button class="chart-btn" data-chart="earnings" data-period="monthly">Monthly</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="earningsChart"></canvas>
                        </div>
                    </div>

                    <!-- Crop Sales Trend Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-line"></i> Crop Sales Trend</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-chart="sales" data-period="daily">Daily</button>
                                <button class="chart-btn" data-chart="sales" data-period="weekly">Weekly</button>
                                <button class="chart-btn" data-chart="sales" data-period="monthly">Monthly</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="salesChart"></canvas>
                        </div>
                    </div>

                    <!-- Market Demand Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-area"></i> Market Demand Analysis</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-chart="demand" data-period="daily">Daily</button>
                                <button class="chart-btn" data-chart="demand" data-period="weekly">Weekly</button>
                                <button class="chart-btn" data-chart="demand" data-period="monthly">Monthly</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="demandChart"></canvas>
                        </div>
                    </div>

                    <!-- Buyer Categories Pie Chart -->
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-pie"></i> Buyer Categories Distribution</h3>
                            <div class="chart-controls">
                                <button class="chart-btn active" data-chart="buyers" data-period="current">Current</button>
                                <button class="chart-btn" data-chart="buyers" data-period="comparison">Compare</button>
                            </div>
                        </div>
                        <div class="chart-container">
                            <canvas id="buyersChart"></canvas>
                        </div>
                        <div class="chart-legend" id="buyersLegend"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detailed Reports Section -->
        <section class="reports-section">
            <div class="container">
                <div class="reports-header">
                    <h2><i class="fas fa-file-alt"></i> Detailed Reports</h2>
                    <div class="report-controls">
                        <select id="reportType" class="filter-select">
                            <option value="all">All Reports</option>
                            <option value="earnings">Earnings Reports</option>
                            <option value="sales">Sales Reports</option>
                            <option value="buyers">Buyer Analytics</option>
                            <option value="crops">Crop Performance</option>
                        </select>
                    </div>
                </div>
                <div class="reports-grid" id="reportsGrid">
                    <!-- Reports will be dynamically generated -->
                </div>
            </div>
        </section>

        <!-- Export Modal -->
        <div id="exportModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-file-pdf"></i> Export Analytics Report</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <form id="exportForm">
                        <div class="form-group">
                            <label for="reportTitle">Report Title:</label>
                            <input type="text" id="reportTitle" value="AgroChain Analytics Report" required>
                        </div>
                        <div class="form-group">
                            <label for="reportPeriod">Report Period:</label>
                            <select id="reportPeriod" required>
                                <option value="current">Current Period</option>
                                <option value="week">This Week</option>
                                <option value="month">This Month</option>
                                <option value="year">This Year</option>
                                <option value="custom">Custom Range</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Include Charts:</label>
                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" name="charts" value="earnings" checked>
                                    <span class="checkmark"></span>
                                    Farmer Earnings Trend
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="charts" value="sales" checked>
                                    <span class="checkmark"></span>
                                    Crop Sales Trend
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="charts" value="demand" checked>
                                    <span class="checkmark"></span>
                                    Market Demand Analysis
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" name="charts" value="buyers" checked>
                                    <span class="checkmark"></span>
                                    Buyer Categories
                                </label>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn-secondary" id="cancelExport">Cancel</button>
                            <button type="submit" class="btn-primary" id="confirmExport">
                                <i class="fas fa-download"></i>
                                Generate PDF
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Loading Overlay -->
        <div id="loadingOverlay" class="loading-overlay">
            <div class="loading-spinner">
                <i class="fas fa-spinner fa-spin"></i>
                <p>Generating PDF Report...</p>
            </div>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 AgroChain. All rights reserved. | <a href="#privacy">Privacy Policy</a> | <a href="#terms">Terms of Service</a></p>
        </div>
    </footer>

    <script src="analytics-reports.js"></script>
</body>
</html>